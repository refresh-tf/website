"use strict";(self.webpackChunkrefresh_website=self.webpackChunkrefresh_website||[]).push([[708],{2708:(I,m,l)=>{l.r(m),l.d(m,{default:()=>w,sqlite3Worker1Promiser:()=>p});var k=l(1746);globalThis.sqlite3Worker1Promiser=function t(r=t.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const e=r;r=Object.assign(Object.create(null),t.defaultConfig),r.onready=e}else r=Object.assign(Object.create(null),t.defaultConfig,r);const n=Object.create(null),u=function(){},o=r.onerror||u,d=r.debug||u,f=r.generateMessageId?void 0:Object.create(null),g=r.generateMessageId||function(e){return e.type+"#"+(f[e.type]=(f[e.type]||0)+1)},b=(...e)=>{throw new Error(e.join(" "))};r.worker||(r.worker=t.defaultConfig.worker),typeof r.worker=="function"&&(r.worker=r.worker());let i,y;return r.worker.onmessage=function(e){e=e.data,d("worker1.onmessage",e);let s=n[e.messageId];if(!s){if(e&&e.type==="sqlite3-api"&&e.result==="worker1-ready"){r.onready&&r.onready(y);return}if(s=n[e.type],s&&s.onrow){s.onrow(e);return}r.onunhandled?r.onunhandled(arguments[0]):o("sqlite3Worker1Promiser() unhandled worker message:",e);return}switch(delete n[e.messageId],e.type){case"error":s.reject(e);return;case"open":i||(i=e.dbId);break;case"close":e.dbId===i&&(i=void 0);break;default:break}try{s.resolve(e)}catch(a){s.reject(a)}},y=function(){let e;arguments.length===1?e=arguments[0]:arguments.length===2?(e=Object.create(null),e.type=arguments[0],e.args=arguments[1],e.dbId=e.args.dbId):b("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!e.dbId&&e.type!=="open"&&(e.dbId=i),e.messageId=g(e),e.departureTime=performance.now();const s=Object.create(null);s.message=e;let a;e.type==="exec"&&e.args&&(typeof e.args.callback=="function"?(a=e.messageId+":row",s.onrow=e.args.callback,e.args.callback=a,n[a]=s):typeof e.args.callback=="string"&&b("exec callback may not be a string when using the Promise interface."));let c=new Promise(function(h,j){s.resolve=h,s.reject=j,n[e.messageId]=s,d("Posting",e.type,"message to Worker dbId="+(i||"default")+":",e),r.worker.postMessage(e)});return a&&(c=c.finally(()=>delete n[a])),c}},globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL(l.p+l.u(630),l.b),{type:void 0})},onerror:(...t)=>console.error("worker1 promiser error",...t)},sqlite3Worker1Promiser.v2=function(t){let r;typeof t=="function"?(r=t,t={}):typeof t?.onready=="function"&&(r=t.onready,delete t.onready);const n=Object.create(null);t=Object.assign(t||Object.create(null),{onready:async function(o){try{r&&await r(o),n.resolve(o)}catch(d){n.reject(d)}}});const u=new Promise(function(o,d){n.resolve=o,n.reject=d});try{this.original(t)}catch(o){n.reject(o)}return u}.bind({original:sqlite3Worker1Promiser});const P=sqlite3Worker1Promiser.v2,p=globalThis.sqlite3Worker1Promiser,w=k.A}}]);
